#!/bin/sh

export TRIMUI_GCC=/home/wmt/work_trimui/aarch64-linux-gnu-7.5.0-linaro
export TRIMUI_STAGING_FILES=/home/wmt/work_trimui

#echo $TRIMUI_STAGING_FILES

cmake \
	-DUSE_FFMPEG=1 \
	-DANDROID=OFF \
	-DWIN32=OFF \
	-DAPPLE=OFF \
	 -DX86=OFF -DX86_64=OFF \
	-DUSE_SYSTEM_FFMPEG=OFF \
	-DCMAKE_CROSSCOMPILING=ON \
	-DUSING_FBDEV=ON \
	-DUSING_GLES2=ON \
	-DUSING_EGL=OFF \
	-DOPENGL_LIBRARIES=GLESv2 \
	-DARM=ON \
	-DARM64=ON \
	-DFORCED_CPU=ARM64 \
	-DUSING_X11_VULKAN=OFF \
	-DVULKAN=OFF \
	-DARM_NO_VULKAN=ON \
	-DUSE_WAYLAND_WSI=OFF \
	-DUSING_QT_UI=OFF \
	-DUNITTEST=OFF \
	-DSIMULATOR=OFF \
	-DHEADLESS=OFF \
	-DSDL2_LIBRARY=$TRIMUI_STAGING_FILES/usr/lib/libSDL2.a \
	-DSDL2_INCLUDE_DIR=$TRIMUI_STAGING_FILES/usr/include/SDL2 \
	-DCMAKE_VERBOSE_MAKEFILE=ON \
	-DSDL2_ttf_PKGCONFIG_STATIC_INCLUDE_DIRS=$TRIMUI_STAGING_FILES/usr/include/SDL2 \
	-DSDL2PC_INCLUDE_DIRS=$TRIMUI_STAGING_FILES/usr/include/SDL2 \
	-DSDL2PC_STATIC_INCLUDE_DIRS=$TRIMUI_STAGING_FILES/usr/include/SDL2 \
	-DSDL2_ttf_PKGCONFIG_INCLUDE_DIRS=$TRIMUI_STAGING_FILES/usr/include/SDL2 \
	-DCMAKE_C_ARCHIVE_CREATE="<CMAKE_AR> qcs <TARGET> <LINK_FLAGS> <OBJECTS>" \
	-DCMAKE_C_ARCHIVE_FINISH=true \
	-DCMAKE_CXX_ARCHIVE_CREATE="<CMAKE_AR> qcs <TARGET> <LINK_FLAGS> <OBJECTS>" \
	-DCMAKE_CXX_ARCHIVE_FINISH=true \
	-DCMAKE_AR=$TRIMUI_GCC/bin/aarch64-linux-gnu-gcc-ar \
	-DCMAKE_C_COMPILER=$TRIMUI_GCC/bin/aarch64-linux-gnu-gcc \
	-DCMAKE_CXX_COMPILER=$TRIMUI_GCC/bin/aarch64-linux-gnu-g++ \
	-DCMAKE_LINKER=$TRIMUI_GCC/bin/aarch64-linux-gnu-ld \
	-DCMAKE_C_FLAGS=-I$TRIMUI_STAGING_FILES/usr/include \
	-DCMAKE_CXX_FLAGS="-I$TRIMUI_STAGING_FILES/usr/include -fpermissive" \
	-DCMAKE_EXE_LINKER_FLAGS="-lz -lbz2 -lfreetype -lEGL -lIMGegl -lsrv_um -lusc -lglslcompiler -L$TRIMUI_STAGING_FILES/usr/lib" \
	..



